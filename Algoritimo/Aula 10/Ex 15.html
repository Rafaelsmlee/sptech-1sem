<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Estoque</title>
</head>
<body>
    Nome do produto <input id="input_nomeProduto"><br>
    Preço de compra <input id="input_precoCompra">
    <br>
    <button onclick="cadastrar()">Cadastrar</button>
    <button onclick="mostrarRelatorio()">Relatório de estoque</button>
    <div id="div_relatorio"></div>

    <script>
        const listaProdutos = [];
        const listaPrecoProdutos = [];

        function cadastrar() {
            const produto = input_nomeProduto.value;
            const precoProduto = Number(input_precoCompra.value);
            listaProdutos.push(produto);
            listaPrecoProdutos.push(precoProduto);
        }

        function mostrarRelatorio() {
            limparLista();

            let somaPrecos = 0;
            let precoVendaTotal = 0;
            let produtoMaisCaro = '';
            let produtoMaisBarato = '';

            for (let i = 0; i < listaProdutos.length; i++) {
                const precoProduto = listaPrecoProdutos[i];
                const valorVendaProduto = (precoProduto * 1.25).toFixed(2);
                somaPrecos += precoProduto;
                precoVendaTotal += Number(valorVendaProduto);

                div_relatorio.innerHTML += `
                    Total de produtos: ${listaProdutos.length}
                    <br>
                    Produto ${i + 1}: ${listaProdutos[i]}
                    <br>
                    Preço de compra: R$${precoProduto}. Vender por R$${valorVendaProduto}
                    <br><br>
                `;

                if (!produtoMaisCaro || precoProduto > listaPrecoProdutos[listaProdutos.indexOf(produtoMaisCaro)]) {
                    produtoMaisCaro = listaProdutos[i];
                }

                if (!produtoMaisBarato || precoProduto < listaPrecoProdutos[listaProdutos.indexOf(produtoMaisBarato)]) {
                    produtoMaisBarato = listaProdutos[i];
                }
            }

            const mediaPrecoVenda = (precoVendaTotal / listaProdutos.length).toFixed(2);

            div_relatorio.innerHTML += `
                Soma dos preços de compra: R$${somaPrecos}
                <br>
                Média de preço de venda: R$${mediaPrecoVenda}
                <br>
                Produto mais caro: ${produtoMaisCaro}
                <br>
                Produto mais barato: ${produtoMaisBarato}
            `;
        }

        function limparLista() {
            div_relatorio.innerHTML = '';
        }
    </script>
</body>
</html>
